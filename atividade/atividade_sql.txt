create extension postgis

-- O nome do bairro e das farmácias existentes em cada
bairro. Utilize a função ST_CONTAINS.

SELECT b.nome, f.nome
FROM bairros b, farmacia f
WHERE ST_Contains(b.geom, f.geom)



-- Calcule a área dos bairros e ordene o resultado em ordem
decrescente pela área.

SELECT nome, ST_Area(geom) AS area_m2
FROM bairros
ORDER BY area_m2 DESC;


-- 3) Calcule a distância entre as farmácias. A consulta deverá
mostrar o código, o nome de cada farmácia com a
respectiva distância


SELECT f1.cod AS cod_farmacia_1, f1.nome AS farmacia_1,
    f2.cod AS cod_farmacia_2, f2.nome AS farmacia_2,
    ST_Distance(f1.geom, f2.geom) AS distancia_m
FROM farmacia f1, farmacia f2
WHERE f1.cod < f2.cod;



-- 4) Calcule a área em hectares do município.

SELECT ST_Area(geom) / 10000 AS area_ha
FROM municipio;


-- 5) Calcule a distância do hospital da Unimed em relação às
farmácias. 

SELECT f.cod, f.nome,
    ST_Distance(h.geom, f.geom) AS distancia_m
FROM farmacia f, hospital h
WHERE h.nome = 'Unimed'
ORDER BY distancia_m;




